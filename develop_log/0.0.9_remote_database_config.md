# 版本 0.0.9 - 远程数据库连接配置

## 功能概述

支持出题人配置远程数据库连接，实现多客户端协同工作。

## 新增功能

### 1. 数据库连接配置界面 (DatabaseConfigView)

#### 功能特点
- **主机地址配置**：支持 IP 地址或域名
- **端口设置**：默认 PostgreSQL 端口 5432
- **数据库名**：默认 interview_system
- **认证信息**：用户名和密码

#### 界面功能
- 测试连接：实时验证数据库连接
- 保存配置：保存到运行时配置
- 恢复默认：快速恢复本地连接
- 帮助信息：连接指南和常见问题

### 2. 角色权限配置

| 角色 | 数据库配置权限 | 题目管理权限 |
|------|----------------|--------------|
| ADMIN | ✓ | ✓ |
| QUESTION_CREATOR | ✓ | ✓ |
| EXAMINER | - | 浏览 |
| CANDIDATE | - | - |

### 3. 连接流程

```
出题人启动应用
  ↓
登录系统（QUESTION_CREATOR 角色）
  ↓
进入"数据库配置"标签
  ↓
填写远程数据库信息
  ↓
点击"测试连接"验证
  ↓
点击"保存配置"
  ↓
开始使用题目管理功能
  ↓
数据实时同步到远程数据库
```

## 使用方式

### 出题人远程出题步骤

1. **管理员配置服务器**
   - 配置 PostgreSQL 允许远程连接
   - 开放防火墙 5432 端口
   - 创建出题人专用账户

2. **出题人配置客户端**
   ```
   启动应用 → 登录 → 数据库配置 → 输入远程地址 → 测试 → 保存
   ```

3. **开始出题**
   - 所有题目数据存储在中央数据库
   - 多个出题人可以同时工作
   - 题目实时同步，避免冲突

## 服务端配置要点

### postgresql.conf
```conf
listen_addresses = '*'
```

### pg_hba.conf
```conf
host interview_system question_creator 192.168.1.0/24 md5
```

## 安全特性

1. **密码保护**：使用 PasswordField 隐藏输入
2. **连接测试**：保存前必须验证连接
3. **配置隔离**：每个客户端独立配置
4. **建议措施**：
   - 使用强密码
   - 限制访问 IP 段
   - 考虑 VPN 或 SSH 隧道

## 技术实现

### 配置类
```java
DatabaseConfig.setPgHost("192.168.1.100");
DatabaseConfig.setPgPort(5432);
DatabaseConfig.setPgDatabase("interview_system");
DatabaseConfig.setPgCredentials("question_creator", "password");
```

### 连接测试
```java
DatabaseConnection.closeConnection();  // 关闭现有连接
DatabaseConnection.testConnection();   // 测试新配置
```

## 构建运行

```bash
cd interview-system
mvn clean package -s settings.xml -DskipTests
java -jar target/interview-system-1.0-SNAPSHOT.jar --db-password 1234
```

## 文件清单

| 文件 | 说明 |
|------|------|
| `DatabaseConfigView.java` | 数据库配置界面 |
| `postgresql_remote_setup.md` | 服务端配置指南 |
| `MainView.java` | 更新角色界面配置 |

## 注意事项

1. **配置不持久化**：应用重启后需重新配置（可考虑后续添加配置文件）
2. **连接异常处理**：网络问题会导致操作失败，会显示错误提示
3. **并发控制**：多个出题人同时编辑同一题目时，后保存者覆盖前者

## 后续优化方向

1. 配置文件持久化（properties 文件）
2. 连接池管理（支持多线程）
3. 自动重连机制
4. 连接加密（SSL）
5. 多数据库实例支持
