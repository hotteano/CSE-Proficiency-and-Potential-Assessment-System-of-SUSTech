# 版本 0.0.7 - 评分提交失败修复

## 问题描述
评分提交失败，提示"评分提交失败，请重试"。

## 原因分析
`EvaluationScoreDao.insert()` 方法需要设置 `candidate_username` 字段，但 `EvaluationService.saveScore()` 方法在创建 `EvaluationScore` 对象时**没有设置考生用户名**，导致数据库插入失败。

### 相关代码
```java
// EvaluationScoreDao.insert() 第75行
pstmt.setString(2, score.getCandidateUsername());  // 这里需要 candidateUsername

// 但 EvaluationService.saveScore() 中没有设置
EvaluationScore score = new EvaluationScore();
score.setInterviewRecordId(recordId);
// 缺少：score.setCandidateUsername(...);
```

## 修复内容

### 1. EvaluationService.saveScore()
修改方法签名，接收 `InterviewRecord` 对象而不是 `int recordId`：

```java
// 修改前
public boolean saveScore(int recordId, Map<EvaluationDimension, Double> scores, ...)

// 修改后  
public boolean saveScore(InterviewRecord record, Map<EvaluationDimension, Double> scores, ...)
```

添加考生用户名设置：
```java
score.setInterviewRecordId(record.getId());
score.setCandidateUsername(record.getCandidateUsername());  // 新增
```

### 2. EvaluationView.submitEvaluation()
更新方法调用：
```java
// 修改前
evaluationService.saveScore(selectedRecord.getId(), scores, ...)

// 修改后
evaluationService.saveScore(selectedRecord, scores, ...)
```

## 构建运行

```bash
cd interview-system
mvn clean package -s settings.xml -DskipTests
java -jar target/interview-system-1.0-SNAPSHOT.jar --db-password 1234
```

## 验证步骤

1. 登录系统（admin/admin123）
2. 进入"面试评分"页面
3. 选择一条面试记录
4. 调整各维度滑块评分
5. 填写评语和评分理由
6. 点击"提交评分"
7. 应显示"评分提交成功！"
