# 版本 0.0.5 - LLM JSON 解析器修复

## 问题描述
DeepSeek Reasoner 模型返回的 JSON 响应包含 `reasoning_content` 字段而不是标准的 `content` 字段，导致原有解析逻辑无法正确提取分析结果。

## 修复内容

### 1. 支持 reasoning_content 字段
DeepSeek-R1/Reasoner 模型特点：
- 返回 `reasoning_content` 包含完整的思维链过程
- `content` 字段为空或简短
- 修复后优先提取 `reasoning_content`（如果 `content` 为空）

### 2. 改进 JSON 解析逻辑
- 重写 `extractFirstChoice()` 方法，正确处理嵌套 JSON 对象
- 改进 `extractJsonValue()` 方法，更稳健地处理字符串转义
- 添加详细的日志输出，便于调试

### 3. 关键修改
```java
// 提取 message 对象
if (firstChoice.contains("\"message\"")) {
    String messageObj = extractJsonObject(firstChoice, "message");
    content = extractJsonValue(messageObj, "content");
    
    // DeepSeek-R1/Reasoner 模型支持
    if (content == null || content.trim().isEmpty()) {
        String reasoningContent = extractJsonValue(messageObj, "reasoning_content");
        if (reasoningContent != null && !reasoningContent.trim().isEmpty()) {
            System.out.println("[LLMManager] 使用 reasoning_content (DeepSeek Reasoner)");
            content = reasoningContent;
        }
    }
}
```

## 使用说明

### DeepSeek 配置建议
- **普通模型**: `deepseek-chat` - 使用标准 content 字段
- **推理模型**: `deepseek-reasoner` - 自动使用 reasoning_content 字段

### 调试日志
启动后会显示详细的解析过程：
```
[LLMManager] 开始解析响应...
[LLMManager] 检测到 choices 字段
[LLMManager] 提取到 choice: {...}
[LLMManager] content 为空，尝试提取 reasoning_content
[LLMManager] 使用 reasoning_content (DeepSeek Reasoner)
[LLMManager] 成功提取内容，长度: 2150
```

## 构建运行

```bash
cd interview-system
mvn clean package -s settings.xml -DskipTests
java -jar target/interview-system-1.0-SNAPSHOT.jar --db-password 1234
```

## 注意事项

1. reasoning_content 可能包含模型思考过程，JSON 结果需要从其中提取
2. 提示词要求 LLM 返回标准 JSON 格式
3. 如果解析失败，会打印原始响应的前 500 字符以便调试
